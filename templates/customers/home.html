
{% extends 'layout.html' %}

{% block content %}

    <div class="container">
        <h1 class="text-center">Hello Customer</h1>

        <!-- Service Types Section -->
<h2 class="mb-3">Available Service Types</h2>
<div class="row">
    {% for service_type in service_types %}
    <div class="col-lg-4 col-md-6 col-sm-12">
        <div class="card mb-4 shadow service-card" 
             data-service-type-id="{{ service_type.id }}">
            <div class="card-body">
                <h5 class="card-title">{{ service_type.name }}</h5>
                <p class="card-text">
                    <strong>Base Price:</strong> ${{ service_type.base_price }}
                </p>
                <button class="btn btn-primary view-services-btn">View Best Price</button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<!-- Service Requests Table -->
<h2>Past Request </h2>
<div class="table-responsive">
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Service</th>
                <th>Customer</th>
                <th>Professional</th>
                <th>Status</th>
                <th>Date of Request</th>
                <th>Remarks</th>
            </tr>
        </thead>
        <tbody>
            {% for request in service_requests %}
                <tr>
                    <td>{{ request.id }}</td>
                    <td>{{ request.name }}</td>
                    <td>{{ request.base_price}}</td>
                    <td>{{ request.time_required if request.time_required else 'Unassigned' }}</td>
                    <td>{{ request.description }}</td>
                    <td>{{ request.professional_id }}</td>
                    <td>{{ request.remarks }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
        
    </div>

    {% endblock %}
    {% block scripts %}
    <script>
        // When the Edit button is clicked, populate the modal with the current row's data
        var editButtons = document.querySelectorAll('[data-bs-toggle="modal"][data-bs-target="#newServiceModal"]');
        editButtons.forEach(function(button) {
            button.addEventListener('click', function () {
                // Get data attributes
                var serviceId = button.getAttribute('data-service-id');
                var serviceName = button.getAttribute('data-service-name');
                var serviceDescription = button.getAttribute('data-service-description');
                var serviceBasePrice = button.getAttribute('data-service-base-price');
                var serviceTimeRequired = button.getAttribute('data-service-time-required');
    
                // Set values in the modal
                document.getElementById('serviceId').value = serviceId;
                document.getElementById('serviceName').value = serviceName;
                document.getElementById('serviceDescription').value = serviceDescription;
                document.getElementById('basePrice').value = serviceBasePrice;
                document.getElementById('timeRequired').value = serviceTimeRequired;
            });
        });
    </script>
    {% endblock %}
    